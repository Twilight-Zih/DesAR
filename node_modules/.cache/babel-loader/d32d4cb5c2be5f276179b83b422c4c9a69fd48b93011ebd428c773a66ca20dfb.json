{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ZIHAB\\\\OneDrive\\\\Desktop\\\\Final Year Mesh&Zih\\\\DesAR\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\n// App.js\n\nimport \"./App.css\";\nimport * as THREE from \"three\";\nimport { ARButton } from \"three/examples/jsm/webxr/ARButton\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\nimport { useEffect, useState, useRef } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [selectedObject, setSelectedObject] = useState(null);\n  const [placedObjects, setPlacedObjects] = useState([]);\n  const [selectedPlacedObject, setSelectedPlacedObject] = useState(null);\n  const rotateIntervalRef = useRef(null);\n  const sceneRef = useRef(null);\n  const cameraRef = useRef(null);\n  const rendererRef = useRef(null);\n  const reticleRef = useRef(null);\n  const controllerRef = useRef(null);\n  const itemsRef = useRef([]);\n  const hitTestSourceRef = useRef(null);\n  const hitTestSourceRequestedRef = useRef(false);\n  useEffect(() => {\n    init();\n    setupFurnitureSelection();\n    animate();\n\n    // Cleanup on unmount\n    return () => {\n      if (rotateIntervalRef.current) {\n        clearInterval(rotateIntervalRef.current);\n      }\n      if (rendererRef.current) {\n        rendererRef.current.dispose();\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Initialize Three.js scene, camera, renderer, ARButton, models, reticle\n  function init() {\n    const myCanvas = document.getElementById(\"canvas\");\n    sceneRef.current = new THREE.Scene();\n    cameraRef.current = new THREE.PerspectiveCamera(70, window.innerWidth / window.innerHeight, 0.01, 20);\n    rendererRef.current = new THREE.WebGLRenderer({\n      canvas: myCanvas,\n      antialias: true,\n      alpha: true\n    });\n    rendererRef.current.setPixelRatio(window.devicePixelRatio);\n    rendererRef.current.setSize(window.innerWidth, window.innerHeight);\n    rendererRef.current.xr.enabled = true;\n\n    // Hemisphere Light\n    const light = new THREE.HemisphereLight(0xffffff, 0xbbbbff, 1);\n    light.position.set(0.5, 1, 0.25);\n    sceneRef.current.add(light);\n\n    // AR Button\n    const arButton = ARButton.createButton(rendererRef.current, {\n      requiredFeatures: [\"hit-test\"],\n      optionalFeatures: [\"dom-overlay\", \"light-estimation\"],\n      domOverlay: {\n        root: document.body\n      }\n    });\n    document.body.appendChild(arButton);\n\n    // Load Models\n    loadModels();\n\n    // Setup Controller\n    controllerRef.current = rendererRef.current.xr.getController(0);\n    sceneRef.current.add(controllerRef.current);\n\n    // Setup Reticle\n    reticleRef.current = new THREE.Mesh(new THREE.RingGeometry(0.15, 0.2, 32).rotateX(-Math.PI / 2), new THREE.MeshBasicMaterial({\n      color: 0x007bff\n    }));\n    reticleRef.current.matrixAutoUpdate = false;\n    reticleRef.current.visible = false;\n    sceneRef.current.add(reticleRef.current);\n\n    // Handle window resize\n    window.addEventListener(\"resize\", onWindowResize, false);\n\n    // Add \"Place\" button event listener\n    const placeButton = document.querySelector(\".place-button\");\n    placeButton.addEventListener(\"click\", onSelect);\n  }\n\n  // Load GLTF models\n  function loadModels() {\n    const modelPaths = [\"./dylan_armchair_yolk_yellow.glb\", \"./ivan_armchair_mineral_blue.glb\", \"./marble_coffee_table.glb\", \"./flippa_functional_coffee_table_w._storagewalnut.glb\", \"./frame_armchairpetrol_velvet_with_gold_frame.glb\", \"./elnaz_nesting_side_tables_brass__green_marble.glb\"];\n    const loader = new GLTFLoader();\n    modelPaths.forEach((path, index) => {\n      loader.load(path, glb => {\n        const model = glb.scene;\n        model.traverse(child => {\n          if (child.isMesh) {\n            child.castShadow = true;\n          }\n        });\n        itemsRef.current[index] = model;\n      }, undefined, error => {\n        console.error(`Error loading model ${path}:`, error);\n      });\n    });\n  }\n\n  // Setup furniture selection from navbar\n  function setupFurnitureSelection() {\n    const buttons = document.querySelectorAll(\".button-image\");\n    buttons.forEach((button, index) => {\n      button.addEventListener(\"click\", () => {\n        setSelectedObject(index);\n        buttons.forEach(btn => btn.classList.remove(\"selected\"));\n        button.classList.add(\"selected\");\n      });\n    });\n  }\n\n  // Handle window resize\n  function onWindowResize() {\n    cameraRef.current.aspect = window.innerWidth / window.innerHeight;\n    cameraRef.current.updateProjectionMatrix();\n    rendererRef.current.setSize(window.innerWidth, window.innerHeight);\n  }\n\n  // Place object when \"Place\" button is pressed\n  function onSelect() {\n    if (reticleRef.current.visible && selectedObject !== null) {\n      const model = itemsRef.current[selectedObject].clone();\n      model.position.copy(reticleRef.current.position);\n      model.rotation.copy(reticleRef.current.rotation);\n\n      // Ensure placement on floor (Y=0)\n      model.position.y = 0;\n\n      // Check for overlap\n      if (detectOverlap(model)) {\n        showTemporaryWarning();\n        return;\n      }\n\n      // Add to scene and state\n      sceneRef.current.add(model);\n      setPlacedObjects(prev => [...prev, model]);\n\n      // Add event listeners for interaction\n      model.userData = {\n        doubleTap: false\n      };\n    }\n  }\n\n  // Detect if the new model overlaps with existing ones\n  function detectOverlap(newModel) {\n    const threshold = 1; // Adjust as needed\n    for (let obj of placedObjects) {\n      const distance = obj.position.distanceTo(newModel.position);\n      if (distance < threshold) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // Show warning message temporarily\n  function showTemporaryWarning() {\n    const warning = document.querySelector(\".warning\");\n    warning.style.display = \"block\";\n    setTimeout(() => {\n      warning.style.display = \"none\";\n    }, 2000); // Display for 2 seconds\n  }\n\n  // Animate loop\n  function animate() {\n    rendererRef.current.setAnimationLoop(render);\n  }\n\n  // Render function\n  function render(timestamp, frame) {\n    if (frame) {\n      const referenceSpace = rendererRef.current.xr.getReferenceSpace();\n      const session = rendererRef.current.xr.getSession();\n      if (!hitTestSourceRequestedRef.current) {\n        session.requestReferenceSpace(\"viewer\").then(referenceSpace => {\n          session.requestHitTestSource({\n            space: referenceSpace\n          }).then(source => {\n            hitTestSourceRef.current = source;\n          });\n        }).catch(error => {\n          console.error(\"Error requesting hit test source:\", error);\n        });\n        session.addEventListener(\"end\", () => {\n          hitTestSourceRequestedRef.current = false;\n          hitTestSourceRef.current = null;\n        });\n        hitTestSourceRequestedRef.current = true;\n      }\n      if (hitTestSourceRef.current) {\n        const hitTestResults = frame.getHitTestResults(hitTestSourceRef.current);\n        if (hitTestResults.length) {\n          const hit = hitTestResults[0];\n          const hitMatrix = new THREE.Matrix4().fromArray(hit.getPose(referenceSpace).transform.matrix);\n          reticleRef.current.visible = true;\n          reticleRef.current.matrix.copy(hitMatrix);\n\n          // Ensure the reticle is placed on the floor by checking the normal\n          const normal = new THREE.Vector3(0, 1, 0); // Assuming floor normal\n          const up = new THREE.Vector3(0, 1, 0);\n          const quaternion = new THREE.Quaternion().setFromRotationMatrix(reticleRef.current.matrix);\n          const rotatedNormal = normal.clone().applyQuaternion(quaternion);\n          const angle = rotatedNormal.angleTo(up);\n          if (angle > Math.PI / 4) {\n            // If the surface is not sufficiently horizontal, hide the reticle\n            reticleRef.current.visible = false;\n          }\n        } else {\n          reticleRef.current.visible = false;\n        }\n      }\n    }\n    rendererRef.current.render(sceneRef.current, cameraRef.current);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"navbar\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"AR Furniture Placement\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"button-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"button-image\",\n          src: \"chair1.png\",\n          alt: \"Chair 1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"button-image\",\n          src: \"chair2.png\",\n          alt: \"Chair 2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"button-image\",\n          src: \"table1.png\",\n          alt: \"Table 1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"canvas-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n        id: \"canvas\",\n        className: \"my-canvas\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"place-button\",\n        children: \"Place\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"warning\",\n      style: {\n        display: \"none\"\n      },\n      children: \"Overlap detected! Please try placing in a different spot.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 259,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"yf65PIa11GpJGgX2PatGDbULcXs=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["THREE","ARButton","GLTFLoader","useEffect","useState","useRef","jsxDEV","_jsxDEV","App","_s","selectedObject","setSelectedObject","placedObjects","setPlacedObjects","selectedPlacedObject","setSelectedPlacedObject","rotateIntervalRef","sceneRef","cameraRef","rendererRef","reticleRef","controllerRef","itemsRef","hitTestSourceRef","hitTestSourceRequestedRef","init","setupFurnitureSelection","animate","current","clearInterval","dispose","myCanvas","document","getElementById","Scene","PerspectiveCamera","window","innerWidth","innerHeight","WebGLRenderer","canvas","antialias","alpha","setPixelRatio","devicePixelRatio","setSize","xr","enabled","light","HemisphereLight","position","set","add","arButton","createButton","requiredFeatures","optionalFeatures","domOverlay","root","body","appendChild","loadModels","getController","Mesh","RingGeometry","rotateX","Math","PI","MeshBasicMaterial","color","matrixAutoUpdate","visible","addEventListener","onWindowResize","placeButton","querySelector","onSelect","modelPaths","loader","forEach","path","index","load","glb","model","scene","traverse","child","isMesh","castShadow","undefined","error","console","buttons","querySelectorAll","button","btn","classList","remove","aspect","updateProjectionMatrix","clone","copy","rotation","y","detectOverlap","showTemporaryWarning","prev","userData","doubleTap","newModel","threshold","obj","distance","distanceTo","warning","style","display","setTimeout","setAnimationLoop","render","timestamp","frame","referenceSpace","getReferenceSpace","session","getSession","requestReferenceSpace","then","requestHitTestSource","space","source","catch","hitTestResults","getHitTestResults","length","hit","hitMatrix","Matrix4","fromArray","getPose","transform","matrix","normal","Vector3","up","quaternion","Quaternion","setFromRotationMatrix","rotatedNormal","applyQuaternion","angle","angleTo","className","children","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","id","_c","$RefreshReg$"],"sources":["C:/Users/ZIHAB/OneDrive/Desktop/Final Year Mesh&Zih/DesAR/src/App.js"],"sourcesContent":["// App.js\n\nimport \"./App.css\";\nimport * as THREE from \"three\";\nimport { ARButton } from \"three/examples/jsm/webxr/ARButton\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\nimport { useEffect, useState, useRef } from \"react\";\n\nfunction App() {\n  const [selectedObject, setSelectedObject] = useState(null);\n  const [placedObjects, setPlacedObjects] = useState([]);\n  const [selectedPlacedObject, setSelectedPlacedObject] = useState(null);\n  const rotateIntervalRef = useRef(null);\n\n  const sceneRef = useRef(null);\n  const cameraRef = useRef(null);\n  const rendererRef = useRef(null);\n  const reticleRef = useRef(null);\n  const controllerRef = useRef(null);\n  const itemsRef = useRef([]);\n  const hitTestSourceRef = useRef(null);\n  const hitTestSourceRequestedRef = useRef(false);\n\n  useEffect(() => {\n    init();\n    setupFurnitureSelection();\n    animate();\n\n    // Cleanup on unmount\n    return () => {\n      if (rotateIntervalRef.current) {\n        clearInterval(rotateIntervalRef.current);\n      }\n      if (rendererRef.current) {\n        rendererRef.current.dispose();\n      }\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Initialize Three.js scene, camera, renderer, ARButton, models, reticle\n  function init() {\n    const myCanvas = document.getElementById(\"canvas\");\n    sceneRef.current = new THREE.Scene();\n    cameraRef.current = new THREE.PerspectiveCamera(\n      70,\n      window.innerWidth / window.innerHeight,\n      0.01,\n      20\n    );\n\n    rendererRef.current = new THREE.WebGLRenderer({\n      canvas: myCanvas,\n      antialias: true,\n      alpha: true,\n    });\n    rendererRef.current.setPixelRatio(window.devicePixelRatio);\n    rendererRef.current.setSize(window.innerWidth, window.innerHeight);\n    rendererRef.current.xr.enabled = true;\n\n    // Hemisphere Light\n    const light = new THREE.HemisphereLight(0xffffff, 0xbbbbff, 1);\n    light.position.set(0.5, 1, 0.25);\n    sceneRef.current.add(light);\n\n    // AR Button\n    const arButton = ARButton.createButton(rendererRef.current, {\n      requiredFeatures: [\"hit-test\"],\n      optionalFeatures: [\"dom-overlay\", \"light-estimation\"],\n      domOverlay: { root: document.body },\n    });\n    document.body.appendChild(arButton);\n\n    // Load Models\n    loadModels();\n\n    // Setup Controller\n    controllerRef.current = rendererRef.current.xr.getController(0);\n    sceneRef.current.add(controllerRef.current);\n\n    // Setup Reticle\n    reticleRef.current = new THREE.Mesh(\n      new THREE.RingGeometry(0.15, 0.2, 32).rotateX(-Math.PI / 2),\n      new THREE.MeshBasicMaterial({ color: 0x007bff })\n    );\n    reticleRef.current.matrixAutoUpdate = false;\n    reticleRef.current.visible = false;\n    sceneRef.current.add(reticleRef.current);\n\n    // Handle window resize\n    window.addEventListener(\"resize\", onWindowResize, false);\n\n    // Add \"Place\" button event listener\n    const placeButton = document.querySelector(\".place-button\");\n    placeButton.addEventListener(\"click\", onSelect);\n  }\n\n  // Load GLTF models\n  function loadModels() {\n    const modelPaths = [\n      \"./dylan_armchair_yolk_yellow.glb\",\n      \"./ivan_armchair_mineral_blue.glb\",\n      \"./marble_coffee_table.glb\",\n      \"./flippa_functional_coffee_table_w._storagewalnut.glb\",\n      \"./frame_armchairpetrol_velvet_with_gold_frame.glb\",\n      \"./elnaz_nesting_side_tables_brass__green_marble.glb\",\n    ];\n    const loader = new GLTFLoader();\n\n    modelPaths.forEach((path, index) => {\n      loader.load(\n        path,\n        (glb) => {\n          const model = glb.scene;\n          model.traverse((child) => {\n            if (child.isMesh) {\n              child.castShadow = true;\n            }\n          });\n          itemsRef.current[index] = model;\n        },\n        undefined,\n        (error) => {\n          console.error(`Error loading model ${path}:`, error);\n        }\n      );\n    });\n  }\n\n  // Setup furniture selection from navbar\n  function setupFurnitureSelection() {\n    const buttons = document.querySelectorAll(\".button-image\");\n    buttons.forEach((button, index) => {\n      button.addEventListener(\"click\", () => {\n        setSelectedObject(index);\n        buttons.forEach((btn) => btn.classList.remove(\"selected\"));\n        button.classList.add(\"selected\");\n      });\n    });\n  }\n\n  // Handle window resize\n  function onWindowResize() {\n    cameraRef.current.aspect = window.innerWidth / window.innerHeight;\n    cameraRef.current.updateProjectionMatrix();\n    rendererRef.current.setSize(window.innerWidth, window.innerHeight);\n  }\n\n  // Place object when \"Place\" button is pressed\n  function onSelect() {\n    if (reticleRef.current.visible && selectedObject !== null) {\n      const model = itemsRef.current[selectedObject].clone();\n      model.position.copy(reticleRef.current.position);\n      model.rotation.copy(reticleRef.current.rotation);\n\n      // Ensure placement on floor (Y=0)\n      model.position.y = 0;\n\n      // Check for overlap\n      if (detectOverlap(model)) {\n        showTemporaryWarning();\n        return;\n      }\n\n      // Add to scene and state\n      sceneRef.current.add(model);\n      setPlacedObjects((prev) => [...prev, model]);\n\n      // Add event listeners for interaction\n      model.userData = { doubleTap: false };\n    }\n  }\n\n  // Detect if the new model overlaps with existing ones\n  function detectOverlap(newModel) {\n    const threshold = 1; // Adjust as needed\n    for (let obj of placedObjects) {\n      const distance = obj.position.distanceTo(newModel.position);\n      if (distance < threshold) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  // Show warning message temporarily\n  function showTemporaryWarning() {\n    const warning = document.querySelector(\".warning\");\n    warning.style.display = \"block\";\n    setTimeout(() => {\n      warning.style.display = \"none\";\n    }, 2000); // Display for 2 seconds\n  }\n\n  // Animate loop\n  function animate() {\n    rendererRef.current.setAnimationLoop(render);\n  }\n\n  // Render function\n  function render(timestamp, frame) {\n    if (frame) {\n      const referenceSpace = rendererRef.current.xr.getReferenceSpace();\n      const session = rendererRef.current.xr.getSession();\n\n      if (!hitTestSourceRequestedRef.current) {\n        session\n          .requestReferenceSpace(\"viewer\")\n          .then((referenceSpace) => {\n            session\n              .requestHitTestSource({ space: referenceSpace })\n              .then((source) => {\n                hitTestSourceRef.current = source;\n              });\n          })\n          .catch((error) => {\n            console.error(\"Error requesting hit test source:\", error);\n          });\n\n        session.addEventListener(\"end\", () => {\n          hitTestSourceRequestedRef.current = false;\n          hitTestSourceRef.current = null;\n        });\n\n        hitTestSourceRequestedRef.current = true;\n      }\n\n      if (hitTestSourceRef.current) {\n        const hitTestResults = frame.getHitTestResults(hitTestSourceRef.current);\n\n        if (hitTestResults.length) {\n          const hit = hitTestResults[0];\n          const hitMatrix = new THREE.Matrix4().fromArray(hit.getPose(referenceSpace).transform.matrix);\n\n          reticleRef.current.visible = true;\n          reticleRef.current.matrix.copy(hitMatrix);\n\n          // Ensure the reticle is placed on the floor by checking the normal\n          const normal = new THREE.Vector3(0, 1, 0); // Assuming floor normal\n          const up = new THREE.Vector3(0, 1, 0);\n          const quaternion = new THREE.Quaternion().setFromRotationMatrix(reticleRef.current.matrix);\n          const rotatedNormal = normal.clone().applyQuaternion(quaternion);\n\n          const angle = rotatedNormal.angleTo(up);\n          if (angle > Math.PI / 4) {\n            // If the surface is not sufficiently horizontal, hide the reticle\n            reticleRef.current.visible = false;\n          }\n        } else {\n          reticleRef.current.visible = false;\n        }\n      }\n    }\n\n    rendererRef.current.render(sceneRef.current, cameraRef.current);\n  }\n\n  return (\n    <div className=\"App\">\n      <div className=\"navbar\">\n        <h1>AR Furniture Placement</h1>\n        <div className=\"button-container\">\n          <img className=\"button-image\" src=\"chair1.png\" alt=\"Chair 1\" />\n          <img className=\"button-image\" src=\"chair2.png\" alt=\"Chair 2\" />\n          <img className=\"button-image\" src=\"table1.png\" alt=\"Table 1\" />\n        </div>\n      </div>\n\n      <div className=\"canvas-container\">\n        <canvas id=\"canvas\" className=\"my-canvas\" />\n        <button className=\"place-button\">Place</button>\n      </div>\n\n      <div className=\"warning\" style={{ display: \"none\" }}>\n        Overlap detected! Please try placing in a different spot.\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}